language: node_js
sudo: false
node_js:
- '0.12'

cache:
  directories:
  - "$(npm root -g)"

branches:
  only:
  - master
  - stage
  - test
  - dev
  - unit-testing

env:
  global:
  #CODACY_PROJECT_TOKEN=[secured]
  - secure: "O6sVn6G1JHMEMVuT7VTGRf8XqxssyBKkRdgc72yI1D1xa+SksGWkYSJOzY03SEJTWhVozCJ/QCZ+K4FrBcwGDIF9P3kUVW5I6yMSezIcpuXizhRbqnqcyQtf/LnugOXIHkqePYla9czSTbcOmbq9oJNGvYPeg3B7B8IzYlFaIZRTtOvrWTVBRXnZ7TYIXW0sET+d5QHu/xoaPJVouMdVwxExrqtnIrfLd/AUyLb995ArND0fE513+jr/8nQXmy+TKQWUewzLS8viZv8rEJ3xUpnmeEM/DpFdnkTGuVXMBkOrDHzsPXxxisf+O9CKwCmN/rLTA1eP0sGHVixcAbjB01HvnSm6Qj/mT6nQwWY941s6rr7WL3o/5w/o24Uc8j4MbkyNPcQvAkJ36l3nIfDGjf7OZTNVaaEf0sa6c02oO66Dk17zZeGd37mAlXCokskanj7rki3Ae2m/li67JLYmVuiNa0uy1QUjEu0wBwlXDemJgAyhSNdQE7YmB+E8F8NIr0v869/UeCpgeq1fTXLfkwxgWJ+3oRvAW2KI7EUGBJboxljp3SRjtbpT0zGyofRt77Qsm8u3Cw9jUz3fBuPj14BzFrK5tVJFziPQkiYRF8HcgZcYW8NsjB0iDAGZ4Nruccc/WTKnJwwATZybU6i4WaJg6t61mAOO8mg3/0H59rQ="
  #COVERALLS_REPO_TOKEN=[secured]
  - secure: "REYJZVXH/vMZ+uq3zH6kLmrGuTLi7im7XX5fQhFFRKHPQ+cMMSD5Tik8bHi9wpusUWPS2ypvvEqig2b6AA/+GeblB0jphscBVjQSKB9tj4A9+GlNvXO6GetpJdZ1j9ELMmH5roLyS9uvKOEX91hXjva5f4KX4HxvWRth8DutxlRnfl+DNqkFNqiI79ZiJoyOKoJHUlkama4Rt5hBPMvKl2oYnl4g/Fp0Sa5s57nU9o9mUXdsoZFjPBmTsGOlpVldW4RCEmG8loq4CUqmB84Y14vIXG3sdOpQE/J3RBLPKSIO4j4ViSKmlVUgvFK7Rhr8t0CXJDcCo15Rvvwe5bh598seEOdIixYZdRarz0+6n2/nOrHxBRPVzAcBdpiBcboBnreNF/ChHPjDjN7LswlrSTRw/UZIN5Z7XnFoGAT8BMZSBB2jOBhv3yY4ieOFnQ/4AMcJBFIbJstoY0N039lI0sEliKgGvl6aFj7U0Dn2f4VosZvI7PsB08joHPGU9uKZZHoyYlGCds6UrqewhsiXZXv1+E03KfenGwA9+L7AMbaih9qdwrsGaRgKA6s8SEv8eEZk0Qhywgel3elN3ffdR/25+g1OJ7CSEkULaa08wUS9CU/LpzqSaYPI2T3EEm0DixqXAaooD5oWX7SNDCFs7F+ivEDR1sTzCxC+1dSgwms="
  #COVERALLS_SERVICE_NAME=[secured]
  - secure: "MN3FnnHd/I2Or69uyq21j4bL6Ix9uV2mECNQKXBdImtatvImCRAvl7IyOwCBeF5YkxQUS7Hf+09haatbMrbglZMUNFeTB/PJVZ44vm/vwK6gMm6QWujb0LNMt78gAunxEQb4yCS0leXleqVOPHy3Ja1mXZfD3oqRIHE1TI4BduBBKMQvaEbz7XYLwe/nrB3kBwVrBdnAK0wvwen2n/GrNIXXRp0S/UuKUdSLs3av/+MpvpWkaukX2MnaBb1e3Z46pjISVm5VpFpaIwvxTV8DbqQ0+47EUZnQRoOMx/9dGQjzrcUj+uC4ZeXUdA67hcEmTNuvuqrHScwWBSKENcnw1mDJWW7ntG1jjKZmH0jIe+Lcv1d3TOQrvIhZ+mZ9rlck3CPwJWKuzM9YeMFm5Zy7CG6wGFRIenUAVFpSJqy+bdDIE0GPycfZNE63xstzShFeRujpnKnzYlY4pC4ikoJHxppH+NuLisPQw1rIMtuB/b2uP9uC7I49r9WqwlXEPTVMDTruZ0huqVJzjrqlx/nkJAugbsRgyUYTi9hJfHNihxV2BqxHG/7+waIiUQtj3Wo7Ywlj0YG6GMIIXpOFjHyIJOr1Vb6OYvmjTEl+k3KeQbMfRSlTZ9Vf2V64/tjmZzFzoXs5nwMf+xemPf7UvdcGkje85Pqw1z15VlnGetiHeSc="
  #JSPM_GITHUB_AUTH_TOKEN=[secured]
  - secure: "ExL3d7Cg/dgrBd38RQbVRAaKI8bar8VoPVbK1C/N9Qx7x4hJGOviU9axuq5PqHIzE5dxbIjKGtNOStHoWJwdXhShW4DzjD3EWkzqz5kWXXVsq8CatDF9bWPSWE8DN1R9cmGYh0ayrG+Re09AHJMV4DjZwc9R2D0+PefuDAbnIeF1bRw4tX/uBdEkElkHqxvEUcDWTLoFdeVOB7HLYt47XjcEAOUmKJ8VqNwKWQi7NgtiUsMiAe8+6f+cnWIfl7dx+Jqj2jqsrWQ+7q2McJLIYVfU1+Q/zIEhQJ7GrMhDzahvZy0qWObtUusxjQOnWvSbVztA4UOQQSwFraOrAR8rqXjRgwYxSH4b5X2083l4YwsjI/aaa+6XPwyGtqK/KkQvrX7Y6ftTV2POVDRYLcc9jiUA3NrGjodVBb7YyBu59JeI8wec1tNIrVM2WLNKgcezhK0QUl+4tqNgW2UxhPNYBip/iG6ivVnwntBxGCZe9RaY7i/0J63vmw4rGn9uYCIUYkPXSMaDUtm+Kwd0b5syVggzSjBxAiigS7jvOS4ARHjqX5Mz9JD7C0q7/7uGhUL3bXWdeec6Qr/icuxdKzNWlpCbHXt2tvleRkE1HkXmEQafIQ9rG7tBSEEho78kJ7F7oJpTFux/a9/UN5bn53t5m9u5cCO9/v1gJgRcdJglVzI="


before_install:
- npm install -g jspm
- jspm config registries.github.auth $JSPM_GITHUB_AUTH_TOKEN
- npm install -g babel
- npm install -g browserify
- npm install -g mocha
- npm install -g mocha-babel
- npm install -g istanbul
- npm install -g coveralls
- npm install -g codacy-coverage
- npm install -g istanbul-combine
- npm install -g isparta
- npm install -g jasmine-core
- npm install -g karma
- npm install -g karma-jspm
- npm install -g karma-jasmine
- npm install -g karma-babel-preprocessor
- npm install -g karma-coverage
- npm install -g karma-verbose-reporter
- npm install -g phantomjs
- npm install -g karma-phantomjs-launcher
- npm install -g karma-chrome-launcher
- npm install -g karma-safari-launcher
- npm install -g karma-ng-html2js-preprocessor
- cp test/package.json .

after_success:
- npm run coverage