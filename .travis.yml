language: node_js
sudo: false
node_js:
- '0.12'

cache:
  directories:
  - "$(npm root -g)"

branches:
  only:
  - master
  - stage
  - test
  - dev
  - unit-testing

env:
  global:
  - secure: "P+50b8aaGHPjqSdBaxcxhySURhdVbiwhq6rya9LwQYYQsGMcuz3jauzOFuNdwV2nT03d9GphTRdwppfP22n1wxBDZrd7BA4ALK+f7rKa/lh9Ch7ca8YcCR7e3p95Pqv6t8JwVoNCvOQYdOW0UQgMPu0sjqSjCMEfWxHi+g3oTokRvCYFaTBGmt93dIitB7Q9VUlBYTQNoR/CjAwbNdXMDr1yLyTggEVcw+vwTx60dMDAo+w+dWq/easD1HYqE3X69hOfRptUi+wA5jBv6UnMdwAZjrSeoNyvpRgnWOtsC81NaknnPNYmAWWoDT92cv/opcHZPFUm7l60QF5ugeMztuJdQ7FGnVpCDnO6ep3KloAOxYbAkPd2Cy7tt8MTq0egZFsC0AFfodBKBd9ckV+vgJwMavHIM3tM3vO5zBYaJrNrkwsUp58a0Xs4f3qbexe3qAOhd8a9bW94X5tG8v6IFJzCyaCkrEgyIN33SYbuLs6KuEWXFH2BQgw018EXatmObDaMv8ZlhvVE2G/SvLVvBngjyRcDgTjtwudaHGow4UxFCzDNftnl4bUeqgUEWoB2SFWaSAnpxaNDTU+TapYwEueD6nY4/rmpyOF2AKd8U3HP+5SPuAvPIJwyt2hsFWTF3/r8pHhZi8bknewFQN5DlxCVSfPWvQC5Fy2l5MLLS0U="

before_install:
- npm install -g jspm
- jspm config registries.github.auth $JSPM_GITHUB_AUTH_TOKEN
- npm install -g babel
- npm install -g browserify
- npm install -g mocha
- npm install -g mocha-babel
- npm install -g istanbul
- npm install -g coveralls
- npm install -g codacy-coverage
- npm install -g istanbul-combine
- npm install -g isparta
- npm install -g jasmine-core
- npm install -g karma
- npm install -g karma-jspm
- npm install -g karma-jasmine
- npm install -g karma-babel-preprocessor
- npm install -g karma-coverage
- npm install -g karma-verbose-reporter
- npm install -g phantomjs
- npm install -g karma-phantomjs-launcher
- npm install -g karma-chrome-launcher
- npm install -g karma-safari-launcher
- npm install -g karma-ng-html2js-preprocessor
- cp test/package.json .

after_success:
- npm run coverage